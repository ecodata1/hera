<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="hera">
<title>Development Guide • hera</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Development Guide">
<meta property="og:description" content="hera">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">hera</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-docs">Docs</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-docs">
    <a class="dropdown-item" href="../articles/hera_specifications.html">Request for comment - Shared Design Principles</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/hera_assessments.html">Regulatory Catalogue</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/development_guide.html">Development Guide</a>
    <a class="dropdown-item" href="../articles/deployment_guide.html">Deploy Guide</a>
    <div class="dropdown-divider"></div>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ecodata1/hera/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Development Guide</h1>
            
            <h4 data-toc-skip class="date">2023-09-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ecodata1/hera/blob/HEAD/vignettes/development_guide.Rmd" class="external-link"><code>vignettes/development_guide.Rmd</code></a></small>
      <div class="d-none name"><code>development_guide.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>To add a new assessment, install <code>hera</code> package.</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"aquaMetrics/hera"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ecodata1.github.io/hera">hera</a></span><span class="op">)</span></span></code></pre>
<ol style="list-style-type: decimal">
<li>Open a new File &gt; New File &gt; R Markdown</li>
<li>Select ‘From Template’</li>
<li>Search for ‘Assessment Template’ and open</li>
<li>Change the <code>title: "Trophic Diatom Index"</code> title to match
your assessment name</li>
<li>Change the vignette entry
<code>%\VignetteIndexEntry{Trophic Diatom Index}</code> to match the
name of your assessment.</li>
<li>Save the document using <code>name-of-your-assessment</code> format
to the package vignette folder.</li>
</ol>
<p>Congratulations! You now have a new assessment template ready to
populate.</p>
<p>Complete the following sections.</p>
</div>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>The first piece of information to add is details on what your
assessment is called and its status. This table shows the options to to
choose from and which fields are required.</p>
<table class="table">
<colgroup>
<col width="8%">
<col width="6%">
<col width="84%">
</colgroup>
<thead><tr class="header">
<th align="left">Columns</th>
<th align="left">Required</th>
<th align="left">Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">name_short</td>
<td align="left">TRUE</td>
<td align="left">Short name for assessment &lt; 26 characters for
example an abbrivation like TDI</td>
</tr>
<tr class="even">
<td align="left">name_long</td>
<td align="left">TRUE</td>
<td align="left">Long name for assessment</td>
</tr>
<tr class="odd">
<td align="left">parameter</td>
<td align="left">TRUE</td>
<td align="left">Parameter or observation method being assessed for
example Freshwater Diatoms, River Barriers or Estaurine Fish.</td>
</tr>
<tr class="even">
<td align="left">status</td>
<td align="left">FALSE</td>
<td align="left">Required - either: ‘prototype’,
‘development’,‘on-hold’, ‘consultation’,‘deprecated’ or ‘deployed’</td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h4>
<p>The code below creates a tibble/dataframe called ‘standard’
containing metadata about the LEAFPACS parameter. This tibble will be
later saved into the ‘hera’ package for future reference.</p>
<p>Code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">description</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">question</span>, <span class="op">~</span><span class="va">response</span>,</span>
<span>  <span class="st">"name_short"</span>, <span class="st">"LEAFPACS"</span>,</span>
<span>  <span class="st">"name_long"</span>, <span class="st">"UKTAG River Assessment Method Macrophytes and Phytobenthos"</span>,</span>
<span>  <span class="st">"parameter"</span>, <span class="st">"River Macrophytes"</span>,</span>
<span>  <span class="st">"status"</span>, <span class="st">"testing"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">description</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 2</span></span></span>
<span><span class="co">##   question   response                                                  </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> name_short LEAFPACS                                                  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> name_long  UKTAG River Assessment Method Macrophytes and Phytobenthos</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> parameter  River Macrophytes                                         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> status     testing</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="input">Input<a class="anchor" aria-label="anchor" href="#input"></a>
</h2>
<p>Create a demo input data.</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="5%">
<col width="87%">
</colgroup>
<thead><tr class="header">
<th align="left">Columns</th>
<th align="left">Required</th>
<th align="left">Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sample_id</td>
<td align="left">TRUE</td>
<td align="left">Sample ID for example 1234523</td>
</tr>
<tr class="even">
<td align="left">question</td>
<td align="left">TRUE</td>
<td align="left">Question you have recorded a repsonse too</td>
</tr>
<tr class="odd">
<td align="left">response</td>
<td align="left">TRUE</td>
<td align="left">Example response</td>
</tr>
<tr class="even">
<td align="left">label</td>
<td align="left">FALSE</td>
<td align="left">Some question also have an associated ‘label’ for
instance Taxon abundance will have a label for the Taxon name - is not
required enter NA</td>
</tr>
<tr class="odd">
<td align="left">…</td>
<td align="left">FALSE</td>
<td align="left">…</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  sample_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"12345"</span>, <span class="st">"12345"</span><span class="op">)</span>,</span>
<span>  question <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Taxon abundance"</span>, <span class="st">"Alkalinity"</span><span class="op">)</span>,</span>
<span>  response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"12"</span>, <span class="st">"45"</span><span class="op">)</span>,</span>
<span>  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gomphonema olivaceum"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  parameter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"River Diatoms"</span>, <span class="st">"Chemistry"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"number"</span>, <span class="st">"number"</span><span class="op">)</span>,</span>
<span>  max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sepa_ecology_results"</span>, <span class="st">"location_attributes"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">input</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 9</span></span></span>
<span><span class="co">##   sample_id question        response label    parameter type  max   min   source</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 12345     Taxon abundance 12       Gomphon… River Di… numb… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    sepa_…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 12345     Alkalinity      45       <span style="color: #BB0000;">NA</span>       Chemistry numb… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    locat…</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="assessment">Assessment<a class="anchor" aria-label="anchor" href="#assessment"></a>
</h2>
<p>This is where the magic happens…</p>
<p>Initially, it may be easier to write a placeholder for what you would
expect the function to return. An example of this is given in the
assessment template.</p>
<p>Your script must return a dataframe with three columns:
<code>sample_id</code>, <code>question</code> and
<code>response</code>.</p>
<p>For instance, questions could be <code>EQR</code>,
<code>Complaint</code>, <code>Inspection Outcome</code>. And responses
could be <code>0.6</code>, <code>TRUE</code>, <code>FAIL</code>.
<code>sample_id</code> will much your input data.</p>
<p>Using your input, write a function to assess your data. You may call
on a web service, import data for elsewhere, or run script from another
programming language (python, matlab etc).</p>
</div>
<div class="section level2">
<h2 id="outcome">Outcome<a class="anchor" aria-label="anchor" href="#outcome"></a>
</h2>
<p>This section display your outcome from the assessemnt function to
show a example outcome from your assessment.</p>
</div>
<div class="section level2">
<h2 id="checklist">Checklist<a class="anchor" aria-label="anchor" href="#checklist"></a>
</h2>
<p><strong>These final sections cover various check and test which don’t
need to be edited. However, they may indicate problems in your
description, input, assessment or outcomes.</strong></p>
<p>The data is formatted using the <code>hera_format</code> function to
neatly present within the documentation for this assessment.The
<code>hera_format</code> function will also check the data for errors or
omissions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">standard_format</span> <span class="op">&lt;-</span> <span class="fu">hera</span><span class="fu">:::</span><span class="fu">hera_format</span><span class="op">(</span>description <span class="op">=</span> <span class="va">description</span><span class="op">)</span> <span class="co"># format table</span></span>
<span><span class="va">standard_format</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<colgroup>
<col width="13%">
<col width="74%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">question</th>
<th align="left">response</th>
<th align="left">optional</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">name_short</td>
<td align="left">LEAFPACS</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">name_long</td>
<td align="left">UKTAG River Assessment Method Macrophytes and
Phytobenthos</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">parameter</td>
<td align="left">River Macrophytes</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">status</td>
<td align="left">testing</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody></table>
</div>
<div class="section level2">
<h2 id="update">Update<a class="anchor" aria-label="anchor" href="#update"></a>
</h2>
<p>Access pre-existing metadata from within <code>hera</code> package.
All metadata is saved in the <code>catalogue</code> nested
dataframe.</p>
<p>You may need to <code>unnest</code> the list columns to see all the
information.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catalogue</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">assessment</span> <span class="op">==</span> <span class="st">"Example"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 0 × 3</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 3 variables: assessment &lt;chr&gt;, data &lt;???&gt;, assessment_function &lt;list&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="launch">Launch<a class="anchor" aria-label="anchor" href="#launch"></a>
</h2>
<p>TODO</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tim Foster.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
